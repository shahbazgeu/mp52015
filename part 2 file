<html>
<head><title>Search for Popularity of a name that has changed over the Year</title>	
</head>
<body>
<?php
$sex=$_POST['sex'];
switch ($sex)
{
	case 'm2':
		male2();
		break;
	case 'f2':
		female2();
		break;
	case 'b2':
		both2();
		break;
	default:
		print "\nunable to find choice";
		exit;
}
?>
<?php
function male2()
{
	$yy=$_POST['yy'];
 	$nm=$_POST['nm'];
	$max=2013;
	echo "YOUR GIVEN YEAR = ".$yy."<br>";
	echo "NAME TO BE SEARCH = ".$nm."<br>";
	echo "CHANGES OCCURS IN THE POSITION OF ".$nm." FROM THE YEAR ".$yy." TO 2013"."<br>";
	$d='/xampp/htdocs/mini';
	while($yy<=$max)
	{
		$dir=opendir($d);
		while(($file=readdir($dir))!== false)
		{
			$st="male_cy$yy"."_top.csv";
			if($file==$st)
			{ 
				echo "<html><body><table>\n\n";
				$f=fopen("$file","r");
				while(($line=fgetcsv($f))!=FALSE)
				{
					if($line[0]==$nm)
					{
						print "$yy    -    $line[2]";
						break;
					}
				}
				fclose($f);
				echo"\n</table></body></html>";
			}
		}
		closedir($dir);
		$yy=$yy+1;	
    	}	
}
function female2()
{
	$yy=$_POST['yy'];
 	$nm=$_POST['nm'];
	$max=2013;
	echo "YOUR GIVEN YEAR = ".$yy."<br>";
	echo "NAME TO BE SEARCH = ".$nm."<br>";
	echo "CHANGES OCCURS IN THE POSITION OF ".$nm." FROM THE YEAR ".$yy." TO 2013"."<br>";
	$d='/xampp/htdocs/mini';
	while($yy<=$max)
	{
		$dir=opendir($d);
		while(($file=readdir($dir))!== false)
		{
			$st="female_cy$yy"."_top.csv";
			if($file==$st)
			{ 
				echo "<html><body><table>\n\n";
				$f=fopen("$file","r");
				while(($line=fgetcsv($f))!=FALSE)
				{
					if($line[0]==$nm)
					{
						print "$yy    -    $line[2]";
						break;
					}
				}
				fclose($f);
				echo"\n</table></body></html>";
			}
		}
		closedir($dir);
		$yy=$yy+1;	
    	}
}
function both2()
{
	$yy=$_POST['yy'];
 	$nm=$_POST['nm'];
	$max=2013;
	echo "YOUR GIVEN YEAR = ".$yy."<br>";
	echo "NAME TO BE SEARCH = ".$nm."<br>";
	echo "CHANGES OCCURS IN THE POSITION OF ".$nm." FROM THE YEAR ".$yy." TO 2013"."<br>";
	$d='/xampp/htdocs/mini';
	while($yy<=$max)
	{
		$dir=opendir($d);
		while(($file=readdir($dir))!== false)
		{
			$st1="male_cy$yy"."_top.csv";
			$st2="female_cy$yy"."_top.csv";
			if(($file==$st1)||($file==$st2))
			{ 
				echo "<html><body><table>\n\n";
				$f=fopen("$file","r");
				while(($line=fgetcsv($f))!=FALSE)
				{
					if($line[0]==$nm)
					{
						print "$yy    -    $line[2]";
						break;
					}
				}
				fclose($f);
				echo"\n</table></body></html>";
			}
		}
		closedir($dir);
		$yy=$yy+1;	
    	}
}
?>
</body>
</html>
