<html>
<head><title>Search for Popularity of a name that has changed over the Year</title>	
</head>
<body>
<?php
$sex=$_POST['sex'];
switch ($sex)
{
	case 'm2':
		male2();
		break;
	case 'f2':
		female2();
		break;
	case 'b2':
		both2();
		break;
	default:
		print "\nunable to find choice";
		exit;
}
?>
<?php
function male2()
{
	$yy=$_POST['yy'];
 	$nm=$_POST['nm'];
	echo "YEAR = ".$yy."<br>";
	echo "NAME = ".$nm."<br>";
	$st="male_cy$yy"."_top.csv";
	$dir=opendir('C:\xampp\htdocs\mini');
	if(is_dir($dir)!==FALSE)
	{
	while($yy<='2013')
	{
		$st="male_cy$yy"."_top.csv";
		while($file=readdir($dir)) 
		{
			if($file==$st)
			{ 
				$f=fopen("$file","r");
				while(!feof($f))
				{
					$line_of_text=fgetcsv($f,1024);
					if($line_of_text[0]==$nm)
					{
						echo "<BR>",$line_of_text[0],",",$line_of_text[1],",",$line_of_text[2];
						break;
					}
				}
				echo "hello";
				fclose($f);
			}	
    		}
		$yy=$yy+1;	
	}
    	closedir($dir);
	}
	else
	{
		print "WRONG PATH IS GIVEN\n";
		exit;
	}
}
function female2()
{
	$yy=$_POST['yy'];
 	$nm=$_POST['nm'];
	echo "YEAR = ".$yy."<br>";
	echo "NAME = ".$nm."<br>";
	$st="female_cy$yy"."_top.csv";
	$dir=opendir('C:\xampp\htdocs\mini');
	if(is_dir($dir)!==FALSE)
	{
	while($yy<='2013')
	{
		$st="female_cy$yy"."_top.csv";
		while($file=readdir($dir)) 
		{
			if($file==$st)
			{ 
				$f=fopen("$file","r");
				
				while(!feof($f))
				{
					$line_of_text=fgetcsv($f,1024);
					if($line_of_text[0]==$nm)
					{
						echo "<BR>",$line_of_text[0],",",$line_of_text[1],",",$line_of_text[2];
						break;
					}
				}
				fclose($f);
			}	
    		}
		$yy=$yy+1;	
	}
    	closedir($dir);
	}
	else
	{
		print "WRONG PATH IS GIVEN\n";
		exit;
	}
}
function both2()
{
	$yy=$_POST['yy'];
 	$nm=$_POST['nm'];
	echo "YEAR = ".$yy."<br>";
	echo "NAME = ".$nm."<br>";
	$st1="male_cy$yy"."_top.csv";
	$st2="female_cy$yy"."_top.csv";
	$dir=opendir('C:\xampp\htdocs\mini');
	if(is_dir($dir)!==FALSE)
	{
	while($yy<='2013')
	{
		$st1="male_cy$yy"."_top.csv";
		$st2="female_cy$yy"."_top.csv";
		while($file=readdir($dir)) 
		{
			if(($file==$st1)||($file==$st2))
			{ 
				$f=fopen("$file","r");
				
				while(!feof($f))
				{
					$line_of_text=fgetcsv($f,1024);
					if($line_of_text[0]==$nm)
					{
						echo "<BR>",$line_of_text[0],",",$line_of_text[1],",",$line_of_text[2];
						break;
					}
				}
				fclose($f);
			}	
    		}
		$yy=$yy+1;	
	}
    	closedir($dir);
	}
	else
	{
		print "WRONG PATH IS GIVEN\n";
		exit;
	}
}
?>
</body>
</html>
